
ğŸ§  Prompt: Sepsis-3 é¢„æµ‹å»ºæ¨¡å…¨æµç¨‹ï¼ˆä¸“ä¸šç‰ˆï¼‰

ç›®æ ‡ï¼šåŸºäº sepsis3_cohort_with_features.csv æ„å»ºä¸€ä¸ªæœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œç”¨äºé¢„æµ‹ ICU æ‚£è€…çš„ 30-day mortalityï¼ˆæˆ–å…¶ä»–ç»“å±€ï¼‰ï¼Œå¹¶éµå¾ªåŒ»å­¦ç ”ç©¶çš„æ•°æ®ç§‘å­¦æµç¨‹ã€‚

â¸»

ğŸ©º Step 1 â€” æ•°æ®æ¢ç´¢ï¼ˆExploratory Data Analysisï¼‰
	1.	åŠ è½½æ•°æ®å¹¶æ‰“å°è¡Œåˆ—æ•°ã€ç¼ºå¤±å€¼æ¯”ä¾‹ã€‚
	2.	å¯¹è¿ç»­å˜é‡ç»˜åˆ¶åˆ†å¸ƒå›¾ï¼ˆhistogram / violinï¼‰ï¼Œå¯¹ç±»åˆ«å˜é‡ç»Ÿè®¡é¢‘æ¬¡ã€‚
	3.	è®¡ç®—å¹¶å¯è§†åŒ–ç›¸å…³çŸ©é˜µï¼ˆcorrelation matrixï¼‰ã€‚
	4.	æ£€æŸ¥å¼‚å¸¸å€¼ï¼ˆoutliersï¼‰ï¼Œå¦‚ï¼š
	â€¢	è´Ÿå°¿é‡æˆ–ä¹³é…¸ <0ï¼›
	â€¢	å¹´é¾„ >110ï¼›
	â€¢	Na <100 æˆ– >180ï¼›
	â€¢	Platelet <10 æˆ– >1000ã€‚
	5.	è¾“å‡º summary è¡¨æ ¼ï¼ˆå‡å€¼ã€æ ‡å‡†å·®ã€ä¸­ä½æ•°ã€IQRï¼‰ã€‚

â¸»

ğŸ§¹ Step 2 â€” æ•°æ®æ¸…æ´—ï¼ˆData Cleaningï¼‰
	1.	åˆ é™¤å®Œå…¨ç©ºçš„åˆ—æˆ–æ— æ„ä¹‰ç‰¹å¾ï¼ˆå¦‚ IDï¼‰ã€‚
	2.	ç”¨åˆç†æ–¹æ³•å¤„ç†ç¼ºå¤±å€¼ï¼š
	â€¢	è¿ç»­å˜é‡ â†’ median å¡«è¡¥ï¼›
	â€¢	åˆ†ç±»å˜é‡ â†’ mode å¡«è¡¥ï¼›
	â€¢	å¯è€ƒè™‘ç”¨ KNNImputer æˆ– MissForestã€‚
	3.	å¯¹æ•°å€¼æç«¯å€¼è¿›è¡Œ winsorizeï¼ˆæˆªæ–­ 1%/99%ï¼‰ã€‚
	4.	å¯¹ç‰¹å¾ç»Ÿä¸€å‘½åï¼ˆsnake_caseï¼‰å¹¶ç¡®ä¿å•ä½ä¸€è‡´ã€‚
	5.	ä¿å­˜ cleaned_features.csvã€‚

â¸»

âš™ï¸ Step 3 â€” ç‰¹å¾å·¥ç¨‹ï¼ˆFeature Engineeringï¼‰
	1.	ç‰¹å¾ç¼©æ”¾ï¼ˆStandardScaler / RobustScalerï¼‰ã€‚
	2.	ç±»åˆ«ç‰¹å¾ç¼–ç ï¼ˆOne-Hot Encoding æˆ– Target Encodingï¼‰ã€‚
	3.	ç”Ÿæˆè¡ç”Ÿç‰¹å¾ï¼ˆå¯é€‰ï¼‰ï¼š
	â€¢	shock_index = heart_rate_mean / sbp_mean
	â€¢	lactate_log = log(lactate_max_24h + 1)
	4.	ç‰¹å¾é€‰æ‹©ï¼š
	â€¢	ä½¿ç”¨ XGBoost / Lasso / Mutual Information / SHAPï¼›
	â€¢	è¾“å‡º top-20 é‡è¦ç‰¹å¾ã€‚

â¸»

ğŸ¤– Step 4 â€” å»ºæ¨¡ï¼ˆModelingï¼‰
	1.	å®šä¹‰ç›®æ ‡å˜é‡ï¼ˆmortality_30dï¼‰ã€‚
	2.	åˆ’åˆ†è®­ç»ƒ / éªŒè¯ / æµ‹è¯•é›†ï¼ˆä¾‹å¦‚ 70-15-15ï¼ŒæŒ‰æ‚£è€…åˆ†å±‚ï¼‰ã€‚
	3.	è¯•éªŒå¤šä¸ªæ¨¡å‹ï¼š
	â€¢	Logistic Regressionï¼ˆbaselineï¼‰
	â€¢	Random Forest
	â€¢	XGBoost / LightGBM
	â€¢	Neural Netï¼ˆå¯é€‰ï¼‰
	4.	ä½¿ç”¨äº¤å‰éªŒè¯ï¼ˆ5-fold Stratified CVï¼‰ã€‚

â¸»

ğŸ§ª Step 5 â€” è¯„ä¼°ä¸è§£é‡Šï¼ˆEvaluation & Explainabilityï¼‰
	1.	æ€§èƒ½æŒ‡æ ‡ï¼š
	â€¢	AUC-ROC, AUPRC, Accuracy, F1, Recall, Precisionï¼›
	â€¢	ç»˜åˆ¶ ROC / PR æ›²çº¿ã€‚
	2.	æ ¡å‡†åˆ†æï¼ˆCalibration curveï¼‰ã€‚
	3.	ç‰¹å¾é‡è¦æ€§ï¼š
	â€¢	XGBoost feature importanceï¼›
	â€¢	SHAP summary plotï¼ˆæ•´ä½“ + ä¸ªä½“è§£é‡Šï¼‰ã€‚
	4.	å­ç»„åˆ†æï¼ˆå¦‚å¹´é¾„>65 vs â‰¤65ï¼‰ã€‚

â¸»

ğŸ“Š Step 6 â€” è¾“å‡ºä¸æŠ¥å‘Šï¼ˆReportingï¼‰
	1.	è¾“å‡ºæ¨¡å‹æ€§èƒ½æ±‡æ€»è¡¨ã€‚
	2.	ä¿å­˜æ¨¡å‹ï¼ˆjoblib/pklï¼‰ä¸ç‰¹å¾ç¼©æ”¾å™¨ã€‚
	3.	è¾“å‡ºï¼š
	â€¢	model_performance.csv
	â€¢	feature_importance.csv
	â€¢	shap_summary.png
	4.	æ’°å†™ä¸€é¡µæŠ¥å‘Šï¼šæ¨¡å‹ç›®æ ‡ã€ç‰¹å¾ã€æ€§èƒ½ã€è§£é‡Šç»“æœã€‚

â¸»

ğŸ”§ Step 7 â€” å¯é€‰é«˜çº§æ‰©å±•
	â€¢	åŠ å…¥æ—¶é—´åºåˆ—ç‰¹å¾ï¼ˆå¤šæ—¥ SOFA / å°¿é‡æ›²çº¿ï¼‰ã€‚
	â€¢	ä½¿ç”¨ AutoMLï¼ˆOptunaã€Sklearn pipeline searchï¼‰ã€‚
	â€¢	ç”¨ FHIR å˜é‡æ˜ å°„åšå¤–éƒ¨éªŒè¯ã€‚
	â€¢	å»ºç«‹ â€œExplainable dashboardâ€ï¼ˆSHAP + Plotlyï¼‰ã€‚

â¸»

ğŸ’¡ ç›´æ¥å¯ç”¨çš„ Prompt æ¨¡æ¿ï¼ˆä½ å¯ä»¥è´´ç»™ AI æˆ– Notebookï¼‰

"""
Goal: Predict 30-day mortality in Sepsis-3 cohort using structured EHR features.

You are a clinical data scientist. Follow standard ML-in-medicine workflow:
1. Load sepsis3_cohort_with_features.csv
2. Perform full EDA (missingness, outliers, correlation, distributions)
3. Clean data: impute missing, remove ID columns, winsorize extremes
4. Scale numerical features and encode categorical variables
5. Split into train/valid/test (stratified by mortality_30d)
6. Train baseline Logistic Regression, Random Forest, XGBoost
7. Evaluate using AUC, AUPRC, F1, recall, calibration
8. Use SHAP to interpret model and show top 15 features
9. Output summary tables and plots (feature importance, ROC, PR)
10. Save cleaned dataset and model artifacts
"""